import{B as u,C as i,D as n,E as p}from"./entry.66efff33.js";const d=u("lang-store",{state:()=>({locale:null}),actions:{async setLocale(e){const{$i18n:a}=i(),{setLocale:o}=a;this.teste=e,await o(e),n.set("locale",e,{expires:365})}},getters:{getLocale:e=>e.teste}}),l=async(e,a)=>{const{$apiFetch:o}=i(),h=k(),g=d(),r=h.getToken,c=g.getLocale;let t={accept:"application/json",authorization:"","accept-language":""};return r!==null&&(t.authorization=`Bearer ${r}`),c!==null&&(t["accept-language"]=c),Object.keys(t).forEach(s=>{(t[s]===null||t[s]===void 0)&&delete t[s]}),await o(e,{...a,async onRequest({options:s}){s.headers=t,s.baseURL=p()}})},k=u("auth-store",{state:()=>({user:null,token:null,roles:["admin","moderator","member"]}),actions:{saveToken(e,a){this.token=e,n.set("token",e,{expires:a?365:null})},saveUser(e){this.user=e},async fetchUser(){if(this.token!==null)try{const e=await l("/user");return this.saveUser(e.data),this.getUser}catch{await this.logout()}},async logout(){try{await l("/logout",{method:"post"}),this.user=null,this.token=null}catch{}n.remove("token")}},getters:{getUser:e=>e.user,getToken:e=>e.token,getSupportedRoles:e=>e.roles,check:e=>e.user!==null}});export{k as a,d as b,l as u};
