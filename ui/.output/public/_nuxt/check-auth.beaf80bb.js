import{r as h,Q as w,Y as S,X as g,Z as p}from"./entry.66efff33.js";import{a as k,b as y}from"./auth.4e66cf30.js";const x=decodeURIComponent,C=encodeURIComponent,T=/; */,l=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function E(t,n){if(typeof t!="string")throw new TypeError("argument str must be a string");let o={},e=n||{},r=t.split(T),s=e.decode||x;for(let i=0;i<r.length;i++){let a=r[i],f=a.indexOf("=");if(f<0)continue;let u=a.substr(0,f).trim(),c=a.substr(++f,a.length).trim();c[0]=='"'&&(c=c.slice(1,-1)),o[u]==null&&(o[u]=v(c,s))}return o}function d(t,n,o){let e=o||{},r=e.encode||C;if(typeof r!="function")throw new TypeError("option encode is invalid");if(!l.test(t))throw new TypeError("argument name is invalid");let s=r(n);if(s&&!l.test(s))throw new TypeError("argument val is invalid");let i=t+"="+s;if(e.maxAge!=null){let a=e.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");i+="; Max-Age="+Math.floor(a)}if(e.domain){if(!l.test(e.domain))throw new TypeError("option domain is invalid");i+="; Domain="+e.domain}if(e.path){if(!l.test(e.path))throw new TypeError("option path is invalid");i+="; Path="+e.path}if(e.expires){if(typeof e.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+="; Expires="+e.expires.toUTCString()}if(e.httpOnly&&(i+="; HttpOnly"),e.secure&&(i+="; Secure"),e.sameSite)switch(typeof e.sameSite=="string"?e.sameSite.toLowerCase():e.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i}function v(t,n){try{return n(t)}catch{return t}}const b={path:"/",decode:t=>S(decodeURIComponent(t)),encode:t=>encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))};function m(t,n){var s,i;const o={...b,...n},e=A(o)||{},r=h((i=e[t])!=null?i:(s=o.default)==null?void 0:s.call(o));return w(r,()=>{U(t,r.value,o)}),r}function A(t={}){return E(document.cookie,t)}function R(t,n,o={}){return n==null?d(t,n,{...o,maxAge:-1}):d(t,n,o)}function U(t,n,o={}){document.cookie=R(t,n,o)}const _=g(async(t,n)=>{let o,e;const r=k(),s=y(),i=m("token").value,a=m("locale").value;i&&!r.getToken&&r.saveToken(i),!r.check&&r.getToken!=null&&([o,e]=p(()=>r.fetchUser()),await o,e()),a&&([o,e]=p(()=>s.setLocale(a)),await o,e())});export{_ as default};
